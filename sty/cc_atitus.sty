%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Personalização de estilos unindo sbc-template (layout) e biblatex-abnt (citações e referências)
% para TCCs da Computação - Atitus Educação
% 
% Ambiente: overleaf.com [pdfLaTeX/2023]
% Autor: Fahad Kalil (github.com/fahadkalil)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ProvidesPackage{sty/cc_atitus}

% norma ABNT NBR 10520/2023 - Sobrenomes em minúsculas
\renewcommand*{\mkbibnamefamily}[1]{#1}

% alias para \citeonline ter o mesmo efeito que \textcite
\NewCommandCopy\citeonline\textcite
\RenewCommandCopy\textcite\citeonline
\DeclareCommandCopy\citeonline\textcite

% fullcite com todos autores e não como cite
\makeatletter
\newcommand{\tempmaxup}[1]{\def\blx@maxcitenames{99}#1}
\makeatother

\DeclareCiteCommand{\fullcite}[\tempmaxup]
{\usebibmacro{prenote}}
{\usedriver
	{}
	{\thefield{entrytype}}}
{\multicitedelim}
{\usebibmacro{postnote}}

%% norma ABNT NBR 6023/2018 - Remover < e > das url geradas usando o comando \url
\makeatletter
\@ifpackageloaded{url}{%
    \def\UrlLeft{}
    \def\UrlRight{}
    \urlstyle{same}
}
\makeatother

\DeclareFieldFormat{url}{\bibstring{urlfrom}\addcolon\addspace \url{#1}}

% ajusta a formatação do DOI nas referencias, porém a própria norma mostra exemplos com 'DOI:' e 'DOI'.
%\DeclareFieldFormat{doi}{DOI\addspace \url{#1}}

%% ignora o campo de url para 'article' no arquivo bib
%\AtEveryBibitem{
%\ifentrytype{article}{
%    \clearfield{url}
%}{}
%}

%% ignora o campo de DOI para 'article' no arquivo bib
\AtEveryBibitem{
\ifentrytype{article}{
    \clearfield{doi}    
}{}
}

%% ignora o campo de DOI para 'book' no arquivo bib
\AtEveryBibitem{
\ifentrytype{book}{
    \clearfield{doi}    
}{}
}

%% ignora o campo de isbn para 'book' no arquivo bib
\AtEveryBibitem{
\ifentrytype{book}{
    \clearfield{isbn}
}{}
}

%% ignora o campo de isbn para 'book' no arquivo bib
\AtEveryBibitem{
\ifentrytype{inproceedings}{
    \clearfield{isbn}
}{}
}

%% ajusta a referência nas legendas de 'Listing' para 'Algoritmo'
\RequirePackage{listing}
\renewcommand{\lstlistingname}{Algoritmo}

\lstset{
    basicstyle=\usefont{T1}{fvm}{m}{n},
    upquote=true,
    belowcaptionskip=10pt,
    literate=
      {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
      {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
      {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
      {À}{{\`A}}1 {È}{{\`E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
      {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
      {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
      {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
      {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
      {ã}{{\~a}}1 {ẽ}{{\~e}}1 {ĩ}{{\~i}}1 {õ}{{\~o}}1 {ũ}{{\~u}}1
      {Ã}{{\~A}}1 {Ẽ}{{\~E}}1 {Ĩ}{{\~I}}1 {Õ}{{\~O}}1 {Ũ}{{\~U}}1
      {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
      {ű}{{\H{u}}}1 {Ű}{{\H{U}}}1 {ő}{{\H{o}}}1 {Ő}{{\H{O}}}1
      {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {Ø}{{\O}}1 {å}{{\r a}}1 {Å}{{\r A}}1
      {€}{{\euro}}1 {£}{{\pounds}}1 {«}{{\guillemotleft}}1
      {»}{{\guillemotright}}1 {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?`}}1 {¡}{{!`}}1 {-}{-}1,    
}

%% https://ctan.math.illinois.edu/macros/latex/contrib/enumitem/enumitem.pdf
%% ajusta indentação de itens em listas
\setlist[itemize]{itemsep=0.3\baselineskip}
\setlist[enumerate]{itemsep=0.3\baselineskip, left=\parindent}
\setlist[description]{left=\parindent, leftmargin=1cm, itemsep=1ex}

% https://tug.org/FontCatalogue/
\renewcommand*{\ttdefault}{cmtt}

%% inclui espaço separando as referências bibliográficas
\RequirePackage{setspace}
\setlength\bibitemsep{\baselineskip}

\emergencystretch=1em